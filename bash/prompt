# ----------------------------------------------------
#
#   Prompt
#   -> Bash-specific prompt settings
#
# ----------------------------------------------------

# ----------------------------------------------------
#   Dependencies
# ----------------------------------------------------

# ----- Status ----- #

_make_prompt_dirty() {
  if [ "$PROMPT_DIRTY" != true ]
  then
    export PROMPT_DIRTY=true
  fi
}

# ----- Spacing ----- #

_add_prompt_headroom() {
  local LAST_BASH_COMMAND=$(fc -ln -1 | tr -d ' \t\n\r\f')
  if [ "$PROMPT_DIRTY" ]
  then
    if [ "c" != "$LAST_BASH_COMMAND" ] && [ "clear" != "$LAST_BASH_COMMAND" ]
    then
      printf "\n"
    fi
  fi
}

# ----------------------------------------------------
#   Commands
# ----------------------------------------------------

PROMPT_COMMAND+="; _add_prompt_headroom; _make_prompt_dirty"

# ----------------------------------------------------
#   Display
# ----------------------------------------------------

PS1='$(tput setaf $CYAN)$(working_directory)$(branch_if_repo) $(tput sgr0) \n\360\237\224\247  '
